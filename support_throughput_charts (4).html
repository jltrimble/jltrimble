<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Support Throughput Charts</title>
  <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
  <script src="https://unpkg.com/recharts@2.10.3/umd/Recharts.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Fraunces:wght@300;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #0e1117; color: #e8eaf0; font-family: 'DM Mono', monospace; min-height: 100vh; padding: 40px 24px; }
    button { cursor: pointer; font-family: 'DM Mono', monospace; }
  </style>
</head>
<body>
<div id="root"></div>
<script>
const { useState } = React;
const { ResponsiveContainer, BarChart, Bar, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip } = Recharts;

const SPRINTS = ['V1','V2','V3','V4','V5','V6','V7','V8','V9','V10','V11','V12','V13','V14','V15','V16','V17','V18','V19','V20','V21','V22','V23','V24','V25','V26','W1','W2','W3'];
const SPRINTS_C4 = [...SPRINTS, 'W4'];

const RAW = {
  p1:           [1,0,2,0,2,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,2,0,0,1,1],
  p2:           [14,12,11,9,15,14,25,12,10,4,10,10,7,13,13,7,10,5,3,7,11,12,7,4,10,5,4,13,17],
  p3:           [21,11,34,12,25,19,24,26,28,32,21,22,16,17,15,13,19,11,17,11,12,7,4,14,8,6,5,11,20],
  p4:           [5,2,1,0,1,1,5,2,1,4,1,6,1,1,3,6,1,2,0,2,2,4,2,2,5,3,0,1,1],
  nullP:        [1,2,1,0,2,0,2,1,2,1,1,1,2,1,0,1,0,0,2,0,1,1,1,0,0,0,0,0,0],
  codeChange:   [2,2,8,3,2,1,0,5,6,3,4,2,4,5,5,9,6,4,5,3,14,5,8,7,4,3,3,2,5],
  noCode:       [11,8,10,25,17,18,12,15,8,18,15,21,14,6,12,6,11,4,1,0,5,17,5,0,9,7,5,5,19],
  closed:       [20,4,5,6,7,5,8,8,9,13,13,6,3,7,8,3,1,6,49,6,22,19,5,7,6,1,2,5,3],
  totalCreated: [42,27,49,21,45,35,56,41,42,41,33,39,26,33,31,27,30,18,22,20,26,24,14,20,25,14,9,26,39],
  totalResolved:[33,14,23,34,26,24,20,28,23,34,32,29,21,18,25,18,18,14,55,9,41,41,18,14,19,11,10,12,27],
};

const COLORS = {
  P1:"#e05c6a", P2:"#f0923b", P3:"#5ba8f5", P4:"#70c9a0", "NULL":"#8a7ec8",
  "Created":"#f0923b", "Total Resolved":"#f0c27f",
  "Code Change":"#5ba8f5", "No Code Change":"#70c9a0", "Closed":"#e05c6a",
};

const chart1Data = SPRINTS.map((s,i) => ({ sprint:s, P1:RAW.p1[i], P2:RAW.p2[i], P3:RAW.p3[i], P4:RAW.p4[i], "NULL":RAW.nullP[i] }));
const chart2Data = SPRINTS.map((s,i) => ({ sprint:s, Created:RAW.totalCreated[i], "Total Resolved":RAW.totalResolved[i] }));
const chart3Data = SPRINTS.map((s,i) => {
  const t = RAW.codeChange[i]+RAW.noCode[i]+RAW.closed[i];
  return { sprint:s, "Code Change":t?+((RAW.codeChange[i]/t)*100).toFixed(1):0, "No Code Change":t?+((RAW.noCode[i]/t)*100).toFixed(1):0, Closed:t?+((RAW.closed[i]/t)*100).toFixed(1):0 };
});
const chart4Data = SPRINTS_C4.map((s,i) => ({
  sprint:s,
  "Code Change":    i<SPRINTS.length ? RAW.codeChange[i] : 0,
  "No Code Change": i<SPRINTS.length ? RAW.noCode[i]    : 0,
  "Closed":         i<SPRINTS.length ? RAW.closed[i]    : 0,
  "Total Resolved": i<SPRINTS.length ? RAW.totalResolved[i] : 0,
}));

const CHARTS = [
  { id:1, title:"Tickets Created by Priority per Sprint",       desc:"Stacked bars show total volume and priority composition each sprint." },
  { id:2, title:"Created vs. Resolved per Sprint",              desc:"Track whether the team kept pace with incoming volume each sprint." },
  { id:3, title:"Resolution Method Breakdown per Sprint",       desc:"100% stacked bars show the proportion of tickets resolved by method." },
  { id:4, title:"Resolution Method by Ticket Count per Sprint", desc:"Line chart showing ticket counts for each resolution method and total resolved." },
];

const el = React.createElement;
const axisProps = { fill:"#7a859e", fontSize:10, fontFamily:"monospace" };
const gridProps = { strokeDasharray:"3 3", stroke:"rgba(255,255,255,0.05)" };

function Dot({ color, line }) {
  return line
    ? el('div', { style:{ width:18, height:2, borderRadius:2, background:color, flexShrink:0 } })
    : el('div', { style:{ width:10, height:10, borderRadius:2, background:color, flexShrink:0 } });
}

function Legend({ items, line }) {
  return el('div', { style:{ display:"flex", gap:"10px 20px", flexWrap:"wrap", marginBottom:16 } },
    items.map(([label, color]) =>
      el('div', { key:label, style:{ display:"flex", alignItems:"center", gap:6, fontSize:11, color:"#9aa3b8" } },
        el(Dot, { color, line }), label
      )
    )
  );
}

function TipBox({ active, payload, label, pct }) {
  if (!active || !payload?.length) return null;
  return el('div', { style:{ background:"#1e263a", border:"1px solid #2e3a54", borderRadius:8, padding:"10px 14px", fontFamily:"monospace", fontSize:12 } },
    el('p', { style:{ color:"#f0c27f", marginBottom:6, fontWeight:600 } }, label),
    payload.map(p => el('p', { key:p.name, style:{ color:COLORS[p.name]||"#9aa3b8", margin:"2px 0" } },
      p.name + ": ", el('span', { style:{ color:"#e8eaf0" } }, p.value + (pct ? "%" : ""))
    ))
  );
}

function App() {
  const [active, setActive] = useState(1);

  return el('div', { style:{ background:"#0e1117", minHeight:"100vh", padding:"40px 24px", fontFamily:"monospace", color:"#e8eaf0" } },

    el('div', { style:{ borderLeft:"3px solid #f0c27f", paddingLeft:16, marginBottom:36 } },
      el('p', { style:{ fontSize:10, letterSpacing:"0.2em", textTransform:"uppercase", color:"#f0c27f", marginBottom:4 } }, "Sprint Analytics"),
      el('h1', { style:{ fontSize:28, fontWeight:700, fontFamily:"Fraunces, serif", margin:0 } }, "Support Throughput"),
      el('p', { style:{ fontSize:12, color:"#7a859e", marginTop:4 } }, "V1 – W3 · 29 sprints")
    ),

    el('div', { style:{ display:"flex", gap:8, marginBottom:28, flexWrap:"wrap" } },
      CHARTS.map(c => el('button', {
        key:c.id, onClick:()=>setActive(c.id),
        style:{ background:active===c.id?"#f0c27f":"#161b27", color:active===c.id?"#0e1117":"#7a859e",
          border:"1px solid", borderColor:active===c.id?"#f0c27f":"#232b3e",
          borderRadius:6, padding:"7px 16px", fontSize:12, fontWeight:active===c.id?700:400, transition:"all 0.15s" }
      }, "Chart " + c.id))
    ),

    ...CHARTS.filter(c=>c.id===active).map(c =>
      el('div', { key:c.id, style:{ background:"#161b27", border:"1px solid #232b3e", borderRadius:12, padding:"28px 24px", position:"relative", overflow:"hidden", maxWidth:1100 } },
        el('div', { style:{ position:"absolute", top:0, left:0, right:0, height:3, background:"linear-gradient(90deg,#f0c27f,transparent)" } }),
        el('p', { style:{ fontSize:10, letterSpacing:"0.18em", color:"#f0c27f", textTransform:"uppercase", margin:"0 0 4px" } }, "Chart 0"+c.id),
        el('h2', { style:{ fontSize:17, fontWeight:700, margin:"0 0 4px" } }, c.title),
        el('p', { style:{ fontSize:12, color:"#7a859e", margin:"0 0 24px" } }, c.desc),

        c.id===1 && el(React.Fragment, null,
          el(Legend, { items:[["P1","#e05c6a"],["P2","#f0923b"],["P3","#5ba8f5"],["P4","#70c9a0"],["NULL","#8a7ec8"]] }),
          el(ResponsiveContainer, { width:"100%", height:320 },
            el(BarChart, { data:chart1Data, margin:{top:4,right:8,left:-10,bottom:20}, barCategoryGap:"25%" },
              el(CartesianGrid, gridProps),
              el(XAxis, { dataKey:"sprint", tick:axisProps, angle:-45, textAnchor:"end", interval:0 }),
              el(YAxis, { tick:axisProps }),
              el(Tooltip, { content: el(TipBox) }),
              ["P1","P2","P3","P4","NULL"].map((k,i) => el(Bar, { key:k, dataKey:k, stackId:"a", fill:COLORS[k], radius:i===4?[3,3,0,0]:[0,0,0,0] }))
            )
          )
        ),

        c.id===2 && el(React.Fragment, null,
          el(Legend, { line:true, items:[["Created","#f0923b"],["Total Resolved","#70c9a0"]] }),
          el(ResponsiveContainer, { width:"100%", height:320 },
            el(LineChart, { data:chart2Data, margin:{top:4,right:8,left:-10,bottom:20} },
              el(CartesianGrid, gridProps),
              el(XAxis, { dataKey:"sprint", tick:axisProps, angle:-45, textAnchor:"end", interval:0 }),
              el(YAxis, { tick:axisProps }),
              el(Tooltip, { content: el(TipBox) }),
              el(Line, { type:"monotone", dataKey:"Created",        stroke:"#f0923b", strokeWidth:2,   dot:{r:2.5}, activeDot:{r:5} }),
              el(Line, { type:"monotone", dataKey:"Total Resolved",  stroke:"#70c9a0", strokeWidth:2,   dot:{r:2.5}, activeDot:{r:5} })
            )
          )
        ),

        c.id===3 && el(React.Fragment, null,
          el(Legend, { items:[["Code Change","#5ba8f5"],["No Code Change","#70c9a0"],["Closed","#e05c6a"]] }),
          el(ResponsiveContainer, { width:"100%", height:320 },
            el(BarChart, { data:chart3Data, margin:{top:4,right:8,left:-10,bottom:20}, barCategoryGap:"25%" },
              el(CartesianGrid, gridProps),
              el(XAxis, { dataKey:"sprint", tick:axisProps, angle:-45, textAnchor:"end", interval:0 }),
              el(YAxis, { tick:axisProps, tickFormatter:v=>v+"%" }),
              el(Tooltip, { content: el(TipBox, { pct:true }) }),
              ["Code Change","No Code Change","Closed"].map((k,i) => el(Bar, { key:k, dataKey:k, stackId:"b", fill:COLORS[k], radius:i===2?[3,3,0,0]:[0,0,0,0] }))
            )
          )
        ),

        c.id===4 && el(React.Fragment, null,
          el(Legend, { line:true, items:[["Code Change","#5ba8f5"],["No Code Change","#70c9a0"],["Closed","#e05c6a"],["Total Resolved","#f0c27f"]] }),

          el(ResponsiveContainer, { width:"100%", height:320 },
            el(LineChart, { data:chart4Data, margin:{top:4,right:8,left:-10,bottom:20} },
              el(CartesianGrid, gridProps),
              el(XAxis, { dataKey:"sprint", tick:axisProps, angle:-45, textAnchor:"end", interval:0 }),
              el(YAxis, { tick:axisProps }),
              el(Tooltip, { content: el(TipBox) }),
              el(Line, { type:"monotone", dataKey:"Code Change",    stroke:"#5ba8f5", strokeWidth:2,   dot:{r:2.5}, activeDot:{r:5} }),
              el(Line, { type:"monotone", dataKey:"No Code Change", stroke:"#70c9a0", strokeWidth:2,   dot:{r:2.5}, activeDot:{r:5} }),
              el(Line, { type:"monotone", dataKey:"Closed",         stroke:"#e05c6a", strokeWidth:2,   dot:{r:2.5}, activeDot:{r:5} }),
              el(Line, { type:"monotone", dataKey:"Total Resolved", stroke:"#f0c27f", strokeWidth:2.5, strokeDasharray:"5 3", dot:{r:2.5}, activeDot:{r:5} })
            )
          )
        )
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(el(App));
</script>
</body>
</html>
